(()=>{"use strict";const e=()=>location.href.includes("/search")||location.href.includes("/images")||location.href.includes("/video"),t=()=>{const e=location.hash.match(/gsc\.q=[\d\D]*?(&|\s)/gi)?.[0],t=location.hash.match(/gsc\.tab=[\d\D]*?(&|\s)/gi)?.[0],s=location.hash.match(/gsc\.page=[\d\D]*?(&|\s)/gi)?.[0];return{q:e?e.slice(6):"",tab:t?t.slice(8):0,page:s?s.slice(9):1}},s=e=>{localStorage.setItem("query",JSON.stringify(e))},o=()=>(console.log(localStorage.getItem("query")),localStorage.getItem("query")?JSON.parse(localStorage.getItem("query")):{q:"",tab:0,page:1});document.addEventListener("DOMContentLoaded",(async c=>{const n=async(e=0,t=null,s=1)=>new Promise(((o,c)=>{let n=0;const a=setInterval((()=>{(1==s&&google||2==s&&document.querySelector(t))&&(clearInterval(a),o()),e>=2e4&&c(),n+=e}),e)}));e()&&document.body.classList.add("_search"),await n(),(()=>{const o=document.querySelector(".gsc-input-box");let c;document.querySelector(".search-form_withoutButton__ZeHVz")||(c=document.querySelector(".gsc-search-button-v2")),document.querySelector(".gsc-search-box").remove(),c&&(c.innerHTML=document.querySelector(".search-form_button__Unuvh").textContent),document.addEventListener("click",(e=>{const t=e.target;o.classList.contains("_focus")&&!t.closest(".search-form_wrapper__ogg9T")?o.classList.remove("_focus"):t.closest(".search-form_wrapper__ogg9T")&&o.classList.add("_focus")})),document.querySelector("#query").replaceWith(o),e()&&document.querySelector(".search-form_button__Unuvh").replaceWith(c);const n=document.querySelector(".gsc-input-box input"),a=()=>n.value.trim(),r=()=>{const e=a(),{q:s,tab:o,page:c}=t();if(console.log(e),e||s)return{q:e||s,tab:o,page:c}};if(e()){const e=()=>{const{q:e,tab:t,page:o}=r();if(!e)return;console.log(t);let c="&"==t[t.length-1]?[...t].shift():t;s({q:e,tab:c,page:o});const n=location.href.slice(0,location.href.lastIndexOf("#"));console.log({q:e,newTab:c,page:o}),location.assign(`${n}#gsc.q=${e}&gsc.tab=${c}&gsc.page=${o}`),location.reload()};n.addEventListener("keydown",(t=>{"Enter"===t.code&&e()})),document.querySelector(".suggestions_suggestions__DgAt8").addEventListener("click",(t=>{t.target.closest(".gssb_a ")&&e()})),c.addEventListener("click",e),document.querySelectorAll(".navigation_link__MPiS5").forEach((e=>e.addEventListener("click",(o=>{o.preventDefault();const c=a(),{q:n,tab:r,page:l}=t();if(!c&&!n)return;const i=c||n,g=e.href.includes("/search")?0:1;let d=e.href.slice(0,e.href.lastIndexOf("?"));"/"==d[d.length-1]&&(d=d.slice(0,d.length-1));const u=`${d}#gsc.q=${i}&gsc.tab=${g}&gsc.page=1`;console.log(u),s({q:i,tab:g,page:1}),location.assign(u)}))))}else{const e=()=>{const{q:e,tab:t,page:o}=r();if(!e)return;const c=`${location.origin}${location.pathname.includes("en")?"/en":""}/search#gsc.q=${e}&gsc.tab=0&gsc.page=1`;s({q:e,tab:0,page:1}),location.assign(c)};n.addEventListener("keydown",(t=>{"Enter"===t.code&&e()})),c&&c.addEventListener("click",e),document.querySelector("suggestions_suggestions__DgAt8").addEventListener("click",(t=>{t.target.closest(".gssb_a ")&&e()}))}})();const{q:a}=t(),{q:r,tab:l,page:i}=o();"&"==a&&""!==r&&(console.log(a),console.log(r,l,i),location.assign(`${location.href.slice(0,location.href.lastIndexOf("#"))}#gsc.q=${r}&gsc.tab=${l}&gsc.page=${i}`));const g=document.querySelector(".gssb_e");document.querySelector(".suggestions_suggestions__DgAt8").append(g),document.querySelector(".gsib_b").addEventListener("click",(e=>{const{q:t,tab:s,page:c}=o(),n=location.href;history.pushState(null,null,`${n.slice(0,n.lastIndexOf("#"))}#gsc.q=${t}&gsc.tab=${s}&gsc.page=${c}`),console.log(t,s,c)}));const d=document.querySelector("#___gcse_0"),u=document.querySelector("header");d.style.paddingTop=u.offsetHeight+"px",await n(0,".gsc-tabdActive .gsc-results",2);const h=document.querySelector(".gsc-tabdActive .gsc-results");h.classList.add(".my-wrapper"),u.parentElement.after(h),h.style.paddingTop=u.offsetHeight+"px",d.remove();const f=u.querySelector("form"),p=document.querySelector(".gsc-expansionArea");let m=()=>{p.style.minHeight=window.innerHeight-u.offsetHeight+"px",h.style.paddingTop=u.offsetHeight+"px"};if(m(),window.addEventListener("resize",m),location.pathname.includes("/search")){const e=e=>{if(window.innerWidth<769){if(h.classList.contains("_center"))return;return h.style.width="",h.style.marginLeft="",void h.classList.add("_center")}h.classList.remove("_center"),h.style.width=f.offsetWidth+"px",h.style.marginLeft=f.offsetLeft+"px"};e(),window.addEventListener("resize",e)}}))})();