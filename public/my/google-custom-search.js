(()=>{"use strict";const e=()=>location.href.includes("/search")||location.href.includes("/images")||location.href.includes("/video"),t=()=>{const e=location.hash.match(/gsc\.q=[\d\D]*?(&|\s)*?/gi)?.[0],t=location.hash.match(/gsc\.tab=[\d\D]+?(&|\s)*?/gi)?.[0],s=location.hash.match(/gsc\.page=[\d\D]+?(&|\s)*?/gi)?.[0];return localStorage.setItem("url",location.href),{q:e?e.slice(6):"",tab:t?t.slice(8):0,page:s?s.slice(9):1}},s=e=>{localStorage.setItem("query",JSON.stringify(e))},c=()=>(console.log(localStorage.getItem("query")),localStorage.getItem("query")?JSON.parse(localStorage.getItem("query")):{q:"",tab:0,page:1});document.addEventListener("DOMContentLoaded",(async o=>{const n=async(e=0,t=null,s=1)=>new Promise(((c,o)=>{let n=0;const r=setInterval((()=>{(1==s&&google||2==s&&document.querySelector(t))&&(clearInterval(r),c()),e>=2e4&&o(),n+=e}),e)}));e()&&document.body.classList.add("_search"),await n(),(()=>{const c=document.querySelector(".gsc-input-box");let o,n;document.querySelector(".search-form_withoutButton__ZeHVz")||(o=document.querySelector(".gsc-search-button-v2")),document.querySelector(".gsc-search-box").remove(),o&&(o.innerHTML=document.querySelector('header form [type="submit"]').textContent),document.querySelector(".search-form_wrapper__ogg9T")?n=".search-form_wrapper__ogg9T":document.querySelector(".input__wrap")&&(n=".input__wrap"),document.addEventListener("click",(e=>{const t=e.target;c.classList.contains("_focus")&&!t.closest(n)?c.classList.remove("_focus"):t.closest(n)&&c.classList.add("_focus")})),document.querySelector("#query")?document.querySelector("#query")?.replaceWith(c):document.querySelector("#search")&&document.querySelector("#search")?.replaceWith(c),document.querySelector('header form [type="submit"]')&&document.querySelector('header form [type="submit"]').replaceWith(o);const r=document.querySelector(".gsc-input-box input"),a=()=>r.value.trim(),l=()=>{const e=a(),{q:s,tab:c,page:o}=t();if(console.log(e),e||s)return{q:e||s,tab:c,page:o}};if(e()){const e=()=>{try{const{q:e,tab:t,page:c}=l();if(!e)return;let o="&"==t[t.length-1]?[...t].shift():t;s({q:e,tab:o,page:c});const n=location.href.slice(0,location.href.lastIndexOf("#"));location.assign(`${n}#gsc.q=${e}&gsc.tab=${o}&gsc.page=${c}`),location.reload()}catch{}};r.addEventListener("keydown",(t=>{"Enter"===t.code&&e()})),document.querySelector(".suggestions_suggestions__DgAt8").addEventListener("click",(t=>{t.target.closest(".gsq_a")&&e()})),o.addEventListener("click",e);const c=e=>["/search?","/images?","/video?"].some((t=>e.includes(t)));[...document.querySelectorAll("a")].filter((e=>c(e.href))).forEach((e=>{console.log(e),e.addEventListener("click",(c=>{c.preventDefault();const o=a(),{q:n,tab:r,page:l}=t();if(!o&&!n)return;const i=o||n,g=e.href.includes("/search")?0:1;let u=e.href.slice(0,e.href.lastIndexOf("?"));"/"==u[u.length-1]&&(u=u.slice(0,u.length-1));const d=`${u}#gsc.q=${i}&gsc.tab=${g}&gsc.page=1`;s({q:i,tab:g,page:1}),location.assign(d)}))}))}else{const e=()=>{try{const{q:e,tab:t,page:c}=l();if(!e)return;const o=`${location.origin}${location.pathname.includes("en")?"/en":""}/search#gsc.q=${e}&gsc.tab=0&gsc.page=1`;s({q:e,tab:0,page:1}),console.log(o),location.assign(o)}catch{}};let t;r.addEventListener("keydown",(t=>{"Enter"===t.code&&e()})),o&&o.addEventListener("click",e),document.querySelector(".suggestions_suggestions__DgAt8")?t=document.querySelector(".suggestions_suggestions__DgAt8"):document.querySelector(".list-hints")&&(t=document.querySelector(".list-hints")),t.addEventListener("click",(t=>{t.target.closest(".gsq_a")&&e()}))}})();const{q:r,tab:a,page:l}=c();if(e()){let{q:e,page:s}=t();console.log(e,s),"&"==e[e.length-1]&&(e=e.slice(0,e.length-1));const c=location.href;location.assign(`${c.slice(0,c.lastIndexOf("#"))}#gsc.q=${e||r||""}&gsc.tab=${c.includes("/search")?0:1}&gsc.page=${s||l||"1"}`)}else""!==r&&s({q:"",tab:0,page:1});const i=document.querySelector(".gssb_e");document.querySelector(".suggestions_suggestions__DgAt8")?document.querySelector(".suggestions_suggestions__DgAt8")?.append(i):document.querySelector(".list-hints")&&document.querySelector(".list-hints").append(i),e()&&document.querySelector(".gsib_b").addEventListener("click",(e=>{const{q:s,tab:o,page:n}=c();let{q:r,page:a}=t();const l=location.href;"&"==r[r.length-1]&&(r=r.slice(0,r.length-1)),history.pushState(null,null,`${l.slice(0,l.lastIndexOf("#"))}#gsc.q=${r||s||""}&gsc.tab=${o}&gsc.page=${n||a||"1"}`),console.log(r,a)}));const u=document.querySelector("#___gcse_0");if(!e())return void(u.style.display="none");const d=document.querySelector("header");u.style.paddingTop=d.offsetHeight+"px",await n(0,".gsc-tabdActive .gsc-results",2);const h=document.querySelector(".gsc-tabdActive .gsc-results");h.classList.add(".my-wrapper"),d.parentElement.after(h),h.style.paddingTop=d.offsetHeight+"px",u.style.display="none";const m=d.querySelector("form"),p=document.querySelector(".gsc-expansionArea");let y=()=>{p.style.minHeight=window.innerHeight-d.offsetHeight+"px",h.style.paddingTop=d.offsetHeight+"px"};if(y(),window.addEventListener("resize",y),location.pathname.includes("/search")){const e=e=>{if(window.innerWidth<769){if(h.classList.contains("_center"))return;return h.style.width="",h.style.marginLeft="",void h.classList.add("_center")}h.classList.remove("_center"),h.style.width=m.offsetWidth+"px",h.style.marginLeft=m.offsetLeft+"px"};e(),window.addEventListener("resize",e)}document.addEventListener("click",(e=>{if(e.target.closest(".gsc-cursor-page")){let e,{q:o,tab:n,page:r}=t(),{q:a,page:l}=c();e=o.length>1&&o.endsWith("&")?o.slice(0,g.length-1):o.length>1?o:a,s({q:e,tab:n,page:r||l||1}),setTimeout((()=>{window.scrollTo({left:0,top:0,behavior:"smooth"})}),0)}})),document.querySelector("#rc-anchor-container")&&(u.style.display="block")}))})();